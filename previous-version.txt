// var http = require('http');
// var markdown = require('markdown');
// var TurndownService = require('turndown');
// var turndownService = new TurndownService();

// var SHIFT = 87;
// var URL_PREFIX = 'http://rus-linux.net';
// var URL_MAINPAGE = 'http://rus-linux.net/MyLDP/BOOKS/Linux_Foundations/toc.html';
// var chaptersHTMLs = [];
// var chaptersUrls = [];
// var chaptersContentsHTMLs = [];
// var chaptersContentsMarkdowns = [];

// var getBeginContentIndex = function (htmlDoc) {
//     return htmlDoc.match(/<h1>/).index;
// };
// var getEndContentIndex = function (htmlDoc) {
//     return htmlDoc.match(/background: #ecedef/).index - SHIFT;
// };
// var getContent = function (htmlDoc) {
//     var indexBegin = getBeginContentIndex(htmlDoc);
//     var indexEnd = getEndContentIndex(htmlDoc);
//     return htmlDoc.slice(indexBegin, indexEnd);
// };
// var getChaptersUrls = function (mainPageHTML) {
//     var wholeChaptersUrls = mainPageHTML.match(/\/MyLDP\/BOOKS\/Linux_Foundations\/[0-9]+\/ch[0-9]+.html/g);
//     var uniqueChaptersUrls = [];
//     wholeChaptersUrls.forEach(function (url) {
//       var wholeUrl = URL_PREFIX + url
//         if(uniqueChaptersUrls.indexOf(wholeUrl) === -1) {
//             uniqueChaptersUrls.push(wholeUrl);
//         }
//     });
//     return uniqueChaptersUrls;
// };
// var downloadMainPage = function () {};
// var downloadChapter = function () {};

// var onChapterLoading = function (res) {
//     var chapterHTML = '';
//     res.on('data', function (dataChunk) {
//         chapterHTML += dataChunk;
//     });
//     res.on('end', function () {
//         chaptersHTMLs.push(chapterHTML);
//         getChaptersHTMLs();
//         chaptersUrls.splice(0, 1);
//     });
// };
// var getChaptersHTMLs = function() {
//     if(chaptersUrls.length !== 0) {
//         http.get(chaptersUrls[0], onChapterLoading).on('error', function (e) {
//             console.log(e.message);
//         });
//         return;
//     }
//         chaptersHTMLs.forEach(function (chapterHTML) {
//             chaptersContentsHTMLs.push(getContent(chapterHTML));
//         });
//         chaptersContentsHTMLs.forEach(function(chapterContentHTML){
//           var markdownContent = turndownService.turndown(chapterContentHTML);
//           chaptersContentsMarkdowns.push(markdownContent);
//         });
// };
// var onMainPageLoading= function (res) {
//     var mainPageHTML = '';
//     res.on('data', function (dataChunk) {
//         mainPageHTML += dataChunk;
//     });
//     res.on('end', function () {
//         chaptersUrls = getChaptersUrls(mainPageHTML);
//         getChaptersHTMLs();
//     });
// };

// http.get(URL_MAINPAGE, onMainPageLoading).on('error', (e) => {
//     console.error(e.message);
// });